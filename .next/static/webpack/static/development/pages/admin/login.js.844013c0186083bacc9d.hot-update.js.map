{"version":3,"file":"static/webpack/static/development/pages/admin/login.js.844013c0186083bacc9d.hot-update.js","sources":["webpack:///./pages/admin/login.js"],"sourcesContent":["import react from 'react';\nimport cx from 'classnames'\nimport Head from 'next/head'\nimport axios from 'axios';\n\n// import layouts\nimport ContentLayout from '../../components/layouts/ContentLayout'\nimport ContentContainer from '../../components/layouts/ContentContainer'\n\n//React Reveal Animation\nimport Fade from 'react-reveal/Fade';\n\n\n//global styles can be found at ../styles/main.scss\n//import specific styling module\nimport aboutStyles from '../styles/about.module.scss';\nimport loginStyles from './login.module.scss';\n\nclass Login extends react.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            invalidLogin: false,\n            admin: '',\n            loggedIn: false,\n            id: '',\n            pw: ''\n        };\n\n        this.handleIDChange = this.handleIDChange.bind(this);\n        this.handlePWChange = this.handlePWChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    static async getInitialProps(ctx) {\n        const res = await axios.get('https://ultimate-express.herokuapp.com/login/check')\n        console.log(res);\n        return this.setState({\n            loggedIn: res.data.loggedIn\n        })\n    }\n\n    handleIDChange(event) {\n        this.setState({ id: event.target.value });\n    }\n\n    handlePWChange(event) {\n        this.setState({ pw: event.target.value });\n    }\n\n    async handleSubmit(event) {\n        event.preventDefault();\n        console.log('ID submitted: ' + this.state.id);\n        console.log('PW submitted: ' + this.state.pw);\n        let details = {\n            name: this.state.id,\n            password: this.state.id\n        }\n        const res = await axios.post('https://ultimate-express.herokuapp.com/login/', details)\n            .catch(function (error) {\n                console.log('Error occured:', error);\n                return false\n            })\n\n        // if error\n        if (!res) {\n            this.setState({\n                invalidLogin: true\n            })\n        }\n        console.log('Login attempt:', res.data);\n    }\n\n    render() {\n        return (\n            <ContentLayout>\n                <section>\n                    <Fade>\n                        <div className={cx('fallback', aboutStyles.herofallback)}>\n                            <div className={cx('hero', aboutStyles.aboutHero)}></div>\n                        </div>\n                    </Fade>\n                </section>\n                {this.state.loggedIn &&\n                    <p className={loginStyles.sessionText}>Logged in as {this.state.admin}. <a href=\"#\">Logout</a></p>\n                }\n                <section>\n                    <ContentContainer>\n                        <h2>Admin Login</h2>\n                        {self.state.invalidLogin &&\n                            <p className={loginStyles.loginError}></p>\n                        }\n                        <form onSubmit={this.handleSubmit} className={loginStyles.form}>\n                            <input type=\"text\" value={this.state.id} onChange={this.handleIDChange} placeholder=\"ID\" className={loginStyles.input} />\n                            <input type=\"text\" value={this.state.pw} onChange={this.handlePWChange} placeholder=\"Password\" className={loginStyles.input} />\n\n                            <input type=\"submit\" value=\"Submit\" className={loginStyles.submitButton} />\n                        </form>\n                    </ContentContainer>\n                </section>\n            </ContentLayout>\n        )\n    }\n}\nexport default Login;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAIA;AACA;AAAA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AAZA;AAaA;AACA;;;AASA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AAAA;AAAA;AACA;;;AAEA;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;;AAIA;AAEA;AACA;AACA;AACA;;AALA;AACA;AAKA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;;;;;;;;;;AAEA;AACA;AAIA;AAAA;AACA;AAAA;AAKA;AAAA;AAAA;AAAA;AAMA;AAAA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAMA;;;AApEA;;;;;;;AACA;AACA;;AADA;AACA;AACA;AACA;AADA;AACA;;;;;;;;;;;AApBA;AACA;AAqFA;;;;A","sourceRoot":""}