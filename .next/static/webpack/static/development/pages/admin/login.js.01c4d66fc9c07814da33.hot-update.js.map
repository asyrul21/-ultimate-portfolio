{"version":3,"file":"static/webpack/static/development/pages/admin/login.js.01c4d66fc9c07814da33.hot-update.js","sources":["webpack:///./pages/admin/login.js"],"sourcesContent":["import react from 'react';\nimport cx from 'classnames'\nimport Head from 'next/head'\nimport axios from 'axios';\n\n// import layouts\nimport ContentLayout from '../../components/layouts/ContentLayout'\nimport ContentContainer from '../../components/layouts/ContentContainer'\nimport ContentsList from '../../components/admin/ContentsList'\n\n//React Reveal Animation\nimport Fade from 'react-reveal/Fade';\n\n\n//global styles can be found at ../styles/main.scss\n//import specific styling module\nimport aboutStyles from '../styles/about.module.scss';\nimport loginStyles from './login.module.scss';\n\nclass Login extends react.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            invalidLogin: false,\n            admin: '',\n            loggedIn: true,\n            id: '',\n            pw: ''\n        };\n\n        this.handleIDChange = this.handleIDChange.bind(this);\n        this.handlePWChange = this.handlePWChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.getContents = this.getContents.bind(this);\n        this.handleLogout = this.handleLogout.bind(this);\n    }\n\n    static async getInitialProps() {\n        const res = await axios.get('https://ultimate-express.herokuapp.com/content/')\n        if (res) {\n            return {\n                content: res.data\n            }\n        }\n    }\n\n    handleIDChange(event) {\n        if (event)\n            this.setState({ id: event.target.value });\n    }\n\n    handlePWChange(event) {\n        if (event)\n            this.setState({ pw: event.target.value });\n    }\n\n    async handleSubmit(event) {\n        event.preventDefault();\n        console.log('ID submitted: ' + this.state.id);\n        console.log('PW submitted: ' + this.state.pw);\n        let details = {\n            name: this.state.id,\n            password: this.state.pw\n        }\n        console.log('Details:', details);\n        const res = await axios.post('https://ultimate-express.herokuapp.com/login/', details)\n            .catch((error) => {\n                console.log('Error occured:', error);\n                return false;\n            })\n\n        if (!res) {\n            return this.setState({\n                invalidLogin: true\n            })\n        } else {\n            this.setState({\n                invalidLogin: false,\n                admin: res.data.admin.name,\n                loggedIn: true,\n                id: '',\n                pw: ''\n            })\n        }\n    }\n\n    async handleLogout() {\n        const res = await axios.get('https://ultimate-express.herokuapp.com/logout/')\n        console.log(res.data);\n\n        return this.setState({\n            // reset\n            invalidLogin: false,\n            admin: '',\n            loggedIn: false,\n            id: '',\n            pw: ''\n        })\n    }\n\n    render() {\n        // console.log('Content:', this.props.content);\n        return (\n            <ContentLayout>\n                <section>\n                    <Fade>\n                        <div className={cx('fallback', aboutStyles.herofallback)}>\n                            <div className={cx('hero', aboutStyles.aboutHero)}></div>\n                        </div>\n                    </Fade>\n                </section>\n                {this.state.loggedIn &&\n                    <p className={loginStyles.sessionText}>Logged in as {this.state.admin}. <a onClick={this.handleLogout}>Logout</a></p>\n                }\n                <section>\n                    <ContentContainer>\n                        <h2>Admin Login</h2>\n                        {this.state.invalidLogin &&\n                            <p className={loginStyles.loginError}>Login Failed.</p>\n                        }\n                        <Fade>\n                            <form onSubmit={this.handleSubmit} className={loginStyles.form}>\n                                <input type=\"text\" value={this.state.id} onChange={this.handleIDChange} placeholder=\"ID\" className={loginStyles.input} required />\n                                <input type=\"password\" value={this.state.pw} onChange={this.handlePWChange} placeholder=\"Password\" className={loginStyles.input} required />\n\n                                <input type=\"submit\" value=\"Submit\" className={loginStyles.submitButton} />\n                            </form>\n                        </Fade>\n                        {this.state.loggedIn &&\n                            <ContentsList data={this.props.content} />\n                        }\n                    </ContentContainer>\n                </section>\n            </ContentLayout>\n        )\n    }\n}\nexport default Login;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAIA;AACA;AAAA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AAdA;AAeA;AACA;;;AAUA;AACA;AACA;AAAA;AACA;;;AAEA;AACA;AACA;AAAA;AACA;;;AAEA;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;;AACA;AAEA;AACA;AACA;AACA;;AALA;AACA;AAKA;;;;;AACA;AACA;AADA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;;;;;;;;;;;;;;;;;AAUA;AACA;;AADA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;;;;;;;;;;AASA;AACA;AACA;AAIA;AAAA;AACA;AAAA;AAKA;AAAA;AAAA;AAAA;AAMA;AAAA;AAGA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAIA;AAAA;AAMA;;;;;;;;;;AAjGA;AACA;;AADA;AACA;AAAA;;;;;AACA;AACA;AADA;AACA;;;;;;;;;;;AAtBA;AACA;AAqHA;;;;A","sourceRoot":""}