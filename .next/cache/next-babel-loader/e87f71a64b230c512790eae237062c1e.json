{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport react from 'react';\nimport cx from 'classnames';\nimport Head from 'next/head';\nimport axios from 'axios'; // import layouts\n\nimport ContentLayout from '../../components/layouts/ContentLayout';\nimport ContentContainer from '../../components/layouts/ContentContainer'; //React Reveal Animation\n\nimport Fade from 'react-reveal/Fade'; //global styles can be found at ../styles/main.scss\n//import specific styling module\n\nimport aboutStyles from '../styles/about.module.scss';\nimport loginStyles from './login.module.scss';\n\nvar Login = /*#__PURE__*/function (_react$Component) {\n  _inherits(Login, _react$Component);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      invalidLogin: false,\n      admin: '',\n      loggedIn: false,\n      id: '',\n      pw: ''\n    };\n    _this.handleIDChange = _this.handleIDChange.bind(_assertThisInitialized(_this));\n    _this.handlePWChange = _this.handlePWChange.bind(_assertThisInitialized(_this));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.getContents = _this.getContents.bind(_assertThisInitialized(_this));\n    _this.handleLogout = _this.handleLogout.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"getContents\",\n    value: function getContents() {\n      var res;\n      return _regeneratorRuntime.async(function getContents$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(axios.get('https://ultimate-express.herokuapp.com/content/'));\n\n            case 2:\n              res = _context.sent;\n\n              if (!res) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\", {\n                content: res.data\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n  }, {\n    key: \"handleIDChange\",\n    value: function handleIDChange(event) {\n      if (event) this.setState({\n        id: event.target.value\n      });\n    }\n  }, {\n    key: \"handlePWChange\",\n    value: function handlePWChange(event) {\n      if (event) this.setState({\n        pw: event.target.value\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var details, res;\n      return _regeneratorRuntime.async(function handleSubmit$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              event.preventDefault();\n              console.log('ID submitted: ' + this.state.id);\n              console.log('PW submitted: ' + this.state.pw);\n              details = {\n                name: this.state.id,\n                password: this.state.pw\n              };\n              console.log('Details:', details);\n              _context2.next = 7;\n              return _regeneratorRuntime.awrap(axios.post('https://ultimate-express.herokuapp.com/login/', details)[\"catch\"](function (error) {\n                console.log('Error occured:', error);\n                return false;\n              }));\n\n            case 7:\n              res = _context2.sent;\n\n              if (res) {\n                _context2.next = 12;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", this.setState({\n                invalidLogin: true\n              }));\n\n            case 12:\n              this.setState({\n                invalidLogin: false,\n                admin: res.data.admin.name,\n                loggedIn: true,\n                id: '',\n                pw: ''\n              });\n\n            case 13:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"handleLogout\",\n    value: function handleLogout() {\n      var res;\n      return _regeneratorRuntime.async(function handleLogout$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(axios.get('https://ultimate-express.herokuapp.com/logout/'));\n\n            case 2:\n              res = _context3.sent;\n              console.log(res.data);\n              return _context3.abrupt(\"return\", this.setState({\n                // reset\n                invalidLogin: false,\n                admin: '',\n                loggedIn: false,\n                id: '',\n                pw: ''\n              }));\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // console.log('Content:', this.props.content);\n      return __jsx(ContentLayout, null, __jsx(\"section\", null, __jsx(Fade, null, __jsx(\"div\", {\n        className: cx('fallback', aboutStyles.herofallback)\n      }, __jsx(\"div\", {\n        className: cx('hero', aboutStyles.aboutHero)\n      })))), this.state.loggedIn && __jsx(\"p\", {\n        className: loginStyles.sessionText\n      }, \"Logged in as \", this.state.admin, \". \", __jsx(\"a\", {\n        onClick: this.handleLogout\n      }, \"Logout\")), __jsx(\"section\", null, __jsx(ContentContainer, null, __jsx(\"h2\", null, \"Admin Login\"), this.state.invalidLogin && __jsx(\"p\", {\n        className: loginStyles.loginError\n      }, \"Login Failed.\"), __jsx(\"form\", {\n        onSubmit: this.handleSubmit,\n        className: loginStyles.form\n      }, __jsx(\"input\", {\n        type: \"text\",\n        value: this.state.id,\n        onChange: this.handleIDChange,\n        placeholder: \"ID\",\n        className: loginStyles.input,\n        required: true\n      }), __jsx(\"input\", {\n        type: \"password\",\n        value: this.state.pw,\n        onChange: this.handlePWChange,\n        placeholder: \"Password\",\n        className: loginStyles.input,\n        required: true\n      }), __jsx(\"input\", {\n        type: \"submit\",\n        value: \"Submit\",\n        className: loginStyles.submitButton\n      })))));\n    }\n  }]);\n\n  return Login;\n}(react.Component);\n\nexport default Login;","map":{"version":3,"sources":["/Users/asyrulhafetzy/Documents/CSDevelopment/Web/myUltimatePortfolio/ultimateportfolio-next/pages/admin/login.js"],"names":["react","cx","Head","axios","ContentLayout","ContentContainer","Fade","aboutStyles","loginStyles","Login","props","state","invalidLogin","admin","loggedIn","id","pw","handleIDChange","bind","handlePWChange","handleSubmit","getContents","handleLogout","get","res","content","data","event","setState","target","value","preventDefault","console","log","details","name","password","post","error","herofallback","aboutHero","sessionText","loginError","form","input","submitButton","Component"],"mappings":"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","sourcesContent":["import react from 'react';\nimport cx from 'classnames'\nimport Head from 'next/head'\nimport axios from 'axios';\n\n// import layouts\nimport ContentLayout from '../../components/layouts/ContentLayout'\nimport ContentContainer from '../../components/layouts/ContentContainer'\n\n//React Reveal Animation\nimport Fade from 'react-reveal/Fade';\n\n\n//global styles can be found at ../styles/main.scss\n//import specific styling module\nimport aboutStyles from '../styles/about.module.scss';\nimport loginStyles from './login.module.scss';\n\nclass Login extends react.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            invalidLogin: false,\n            admin: '',\n            loggedIn: false,\n            id: '',\n            pw: ''\n        };\n\n        this.handleIDChange = this.handleIDChange.bind(this);\n        this.handlePWChange = this.handlePWChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.getContents = this.getContents.bind(this);\n        this.handleLogout = this.handleLogout.bind(this);\n    }\n\n    async getContents() {\n        const res = await axios.get('https://ultimate-express.herokuapp.com/content/')\n        if (res) {\n            return {\n                content: res.data\n            }\n        }\n    }\n\n    handleIDChange(event) {\n        if (event)\n            this.setState({ id: event.target.value });\n    }\n\n    handlePWChange(event) {\n        if (event)\n            this.setState({ pw: event.target.value });\n    }\n\n    async handleSubmit(event) {\n        event.preventDefault();\n        console.log('ID submitted: ' + this.state.id);\n        console.log('PW submitted: ' + this.state.pw);\n        let details = {\n            name: this.state.id,\n            password: this.state.pw\n        }\n        console.log('Details:', details);\n        const res = await axios.post('https://ultimate-express.herokuapp.com/login/', details)\n            .catch((error) => {\n                console.log('Error occured:', error);\n                return false;\n            })\n\n        if (!res) {\n            return this.setState({\n                invalidLogin: true\n            })\n        } else {\n            this.setState({\n                invalidLogin: false,\n                admin: res.data.admin.name,\n                loggedIn: true,\n                id: '',\n                pw: ''\n            })\n        }\n    }\n\n    async handleLogout() {\n        const res = await axios.get('https://ultimate-express.herokuapp.com/logout/')\n        console.log(res.data);\n\n        return this.setState({\n            // reset\n            invalidLogin: false,\n            admin: '',\n            loggedIn: false,\n            id: '',\n            pw: ''\n        })\n    }\n\n    render() {\n        // console.log('Content:', this.props.content);\n        return (\n            <ContentLayout>\n                <section>\n                    <Fade>\n                        <div className={cx('fallback', aboutStyles.herofallback)}>\n                            <div className={cx('hero', aboutStyles.aboutHero)}></div>\n                        </div>\n                    </Fade>\n                </section>\n                {this.state.loggedIn &&\n                    <p className={loginStyles.sessionText}>Logged in as {this.state.admin}. <a onClick={this.handleLogout}>Logout</a></p>\n                }\n                <section>\n                    <ContentContainer>\n                        <h2>Admin Login</h2>\n                        {this.state.invalidLogin &&\n                            <p className={loginStyles.loginError}>Login Failed.</p>\n                        }\n                        <form onSubmit={this.handleSubmit} className={loginStyles.form}>\n                            <input type=\"text\" value={this.state.id} onChange={this.handleIDChange} placeholder=\"ID\" className={loginStyles.input} required />\n                            <input type=\"password\" value={this.state.pw} onChange={this.handlePWChange} placeholder=\"Password\" className={loginStyles.input} required />\n\n                            <input type=\"submit\" value=\"Submit\" className={loginStyles.submitButton} />\n                        </form>\n                    </ContentContainer>\n                </section>\n            </ContentLayout>\n        )\n    }\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}