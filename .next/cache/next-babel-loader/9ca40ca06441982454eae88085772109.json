{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport react from 'react';\nimport cx from 'classnames';\nimport Head from 'next/head';\nimport axios from 'axios'; // import layouts\n\nimport ContentLayout from '../../components/layouts/ContentLayout';\nimport ContentContainer from '../../components/layouts/ContentContainer';\nimport ContentsList from '../../components/admin/ContentsList'; //React Reveal Animation\n\nimport Fade from 'react-reveal/Fade'; //global styles can be found at ../styles/main.scss\n//import specific styling module\n\nimport aboutStyles from '../styles/about.module.scss';\nimport loginStyles from './login.module.scss';\n\nclass Login extends react.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      invalidLogin: false,\n      admin: '',\n      loggedIn: true,\n      id: '',\n      pw: ''\n    };\n    this.handleIDChange = this.handleIDChange.bind(this);\n    this.handlePWChange = this.handlePWChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleLogout = this.handleLogout.bind(this);\n  }\n\n  static async getInitialProps(ctx) {\n    const res = await axios.get('https://ultimate-express.herokuapp.com/content/');\n\n    if (res) {\n      return {\n        content: res.data\n      };\n    }\n  }\n\n  handleIDChange(event) {\n    if (event) this.setState({\n      id: event.target.value\n    });\n  }\n\n  handlePWChange(event) {\n    if (event) this.setState({\n      pw: event.target.value\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n    console.log('ID submitted: ' + this.state.id);\n    console.log('PW submitted: ' + this.state.pw);\n    let details = {\n      name: this.state.id,\n      password: this.state.pw\n    };\n    console.log('Details:', details);\n    const res = await axios.post('https://ultimate-express.herokuapp.com/login/', details).catch(error => {\n      console.log('Error occured:', error);\n      return false;\n    });\n\n    if (!res) {\n      return this.setState({\n        invalidLogin: true\n      });\n    } else {\n      this.setState({\n        invalidLogin: false,\n        admin: res.data.admin.name,\n        loggedIn: true,\n        id: '',\n        pw: ''\n      });\n    }\n  }\n\n  async handleLogout() {\n    const res = await axios.get('https://ultimate-express.herokuapp.com/logout/');\n    console.log(res.data);\n    return this.setState({\n      // reset\n      invalidLogin: false,\n      admin: '',\n      loggedIn: false,\n      id: '',\n      pw: ''\n    });\n  }\n\n  render() {\n    // console.log('Content:', this.props.content);\n    return __jsx(ContentLayout, null, __jsx(\"section\", null, __jsx(Fade, null, __jsx(\"div\", {\n      className: cx('fallback', aboutStyles.herofallback)\n    }, __jsx(\"div\", {\n      className: cx('hero', aboutStyles.aboutHero)\n    })))), this.state.loggedIn && __jsx(\"p\", {\n      className: loginStyles.sessionText\n    }, \"Logged in as \", this.state.admin, \". \", __jsx(\"a\", {\n      onClick: this.handleLogout\n    }, \"Logout\")), __jsx(\"section\", null, __jsx(ContentContainer, null, __jsx(\"h2\", null, \"Admin Login\"), this.state.invalidLogin && __jsx(\"p\", {\n      className: loginStyles.loginError\n    }, \"Login Failed.\"), !this.state.loggedIn && __jsx(Fade, null, __jsx(\"form\", {\n      onSubmit: this.handleSubmit,\n      className: loginStyles.form\n    }, __jsx(\"input\", {\n      type: \"text\",\n      value: this.state.id,\n      onChange: this.handleIDChange,\n      placeholder: \"ID\",\n      className: loginStyles.input,\n      required: true\n    }), __jsx(\"input\", {\n      type: \"password\",\n      value: this.state.pw,\n      onChange: this.handlePWChange,\n      placeholder: \"Password\",\n      className: loginStyles.input,\n      required: true\n    }), __jsx(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      className: loginStyles.submitButton\n    }))), this.state.loggedIn && __jsx(Fade, null, __jsx(ContentsList, {\n      data: this.props.content\n    })))));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/asyrulhafetzy/Documents/CSDevelopment/Web/myUltimatePortfolio/ultimateportfolio-next/pages/admin/login.js"],"names":["react","cx","Head","axios","ContentLayout","ContentContainer","ContentsList","Fade","aboutStyles","loginStyles","Login","Component","constructor","props","state","invalidLogin","admin","loggedIn","id","pw","handleIDChange","bind","handlePWChange","handleSubmit","handleLogout","getInitialProps","ctx","res","get","content","data","event","setState","target","value","preventDefault","console","log","details","name","password","post","catch","error","render","herofallback","aboutHero","sessionText","loginError","form","input","submitButton"],"mappings":"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","sourcesContent":["import react from 'react';\nimport cx from 'classnames'\nimport Head from 'next/head'\nimport axios from 'axios';\n\n// import layouts\nimport ContentLayout from '../../components/layouts/ContentLayout'\nimport ContentContainer from '../../components/layouts/ContentContainer'\nimport ContentsList from '../../components/admin/ContentsList'\n\n//React Reveal Animation\nimport Fade from 'react-reveal/Fade';\n\n\n//global styles can be found at ../styles/main.scss\n//import specific styling module\nimport aboutStyles from '../styles/about.module.scss';\nimport loginStyles from './login.module.scss';\n\nclass Login extends react.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            invalidLogin: false,\n            admin: '',\n            loggedIn: true,\n            id: '',\n            pw: ''\n        };\n\n        this.handleIDChange = this.handleIDChange.bind(this);\n        this.handlePWChange = this.handlePWChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleLogout = this.handleLogout.bind(this);\n    }\n\n    static async getInitialProps(ctx) {\n        const res = await axios.get('https://ultimate-express.herokuapp.com/content/')\n        if (res) {\n            return {\n                content: res.data\n            }\n        }\n    }\n\n    handleIDChange(event) {\n        if (event)\n            this.setState({ id: event.target.value });\n    }\n\n    handlePWChange(event) {\n        if (event)\n            this.setState({ pw: event.target.value });\n    }\n\n    async handleSubmit(event) {\n        event.preventDefault();\n        console.log('ID submitted: ' + this.state.id);\n        console.log('PW submitted: ' + this.state.pw);\n        let details = {\n            name: this.state.id,\n            password: this.state.pw\n        }\n        console.log('Details:', details);\n        const res = await axios.post('https://ultimate-express.herokuapp.com/login/', details)\n            .catch((error) => {\n                console.log('Error occured:', error);\n                return false;\n            })\n\n        if (!res) {\n            return this.setState({\n                invalidLogin: true\n            })\n        } else {\n            this.setState({\n                invalidLogin: false,\n                admin: res.data.admin.name,\n                loggedIn: true,\n                id: '',\n                pw: ''\n            })\n        }\n    }\n\n    async handleLogout() {\n        const res = await axios.get('https://ultimate-express.herokuapp.com/logout/')\n        console.log(res.data);\n\n        return this.setState({\n            // reset\n            invalidLogin: false,\n            admin: '',\n            loggedIn: false,\n            id: '',\n            pw: ''\n        })\n    }\n\n    render() {\n        // console.log('Content:', this.props.content);\n        return (\n            <ContentLayout>\n                <section>\n                    <Fade>\n                        <div className={cx('fallback', aboutStyles.herofallback)}>\n                            <div className={cx('hero', aboutStyles.aboutHero)}></div>\n                        </div>\n                    </Fade>\n                </section>\n                {this.state.loggedIn &&\n                    <p className={loginStyles.sessionText}>Logged in as {this.state.admin}. <a onClick={this.handleLogout}>Logout</a></p>\n                }\n                <section>\n                    <ContentContainer>\n                        <h2>Admin Login</h2>\n                        {this.state.invalidLogin &&\n                            <p className={loginStyles.loginError}>Login Failed.</p>\n                        }\n                        {\n                            !this.state.loggedIn &&\n                            <Fade>\n                                <form onSubmit={this.handleSubmit} className={loginStyles.form}>\n                                    <input type=\"text\" value={this.state.id} onChange={this.handleIDChange} placeholder=\"ID\" className={loginStyles.input} required />\n                                    <input type=\"password\" value={this.state.pw} onChange={this.handlePWChange} placeholder=\"Password\" className={loginStyles.input} required />\n\n                                    <input type=\"submit\" value=\"Submit\" className={loginStyles.submitButton} />\n                                </form>\n                            </Fade>\n                        }\n                        {\n                            this.state.loggedIn &&\n                            <Fade>\n                                <ContentsList data={this.props.content} />\n                            </Fade>\n\n                        }\n                    </ContentContainer>\n                </section>\n            </ContentLayout>\n        )\n    }\n}\nexport default Login;"]},"metadata":{},"sourceType":"module"}